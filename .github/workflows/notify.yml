name: Discord Alerts

on:
  push:
    branches: [ main ]
  pull_request:
    types: [opened, closed]
    branches: [ main ]

jobs:
  alert:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: Discord notification
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        uses: Ilshidur/action-discord@master
        with:
          args: |
            ðŸ”” Nova atividade no repositÃ³rio **${{ github.repository }}**!
            
            - Evento: **${{ github.event_name }}**
            - Branch: **${{ github.ref_name }}**
            - Autor: **${{ github.actor }}**
            
            [Ver detalhes](https://github.com/${{ github.repository }}/commit/${{ github.sha }})